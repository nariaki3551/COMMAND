#!/usr/local/bin/python3
from sys import argv, stdin
from collections import Counter
import matplotlib.pyplot as plt

__doc__ = """
Usage:
    hist [-h | --help]

Options:
    -h --help       Show this screen and exit.
    -n --num_bins   Number of bins of histgram.
    -y --yscale     Set yscale (linear(default), log)
    -s --save       Save figure as hist.png

Note:
    標準入力(1列)からhistgramを作成する
"""

SAVE = False
NUM_BINS = None
YSCALE = 'linear'

def usage():
    print(__doc__)
    exit()

def main():
    data = [float(row.strip()) for row in stdin.readlines()]
    fig, ax = plt.subplots()
    ax.hist(data, NUM_BINS)
    ax.set_yscale(YSCALE)
    if SAVE:
        fig.savefig('hist.png')
    else:
        plt.show()

if __name__ == '__main__':
    for v in argv[1:]:
        if v in ['-h', '--help']:
            usage()
        if v in ['-n', '--num_bins']:
            nb_ix = argv.index(v)
            NUM_BINS = int(argv[nb_ix+1])
        if v in ['-y', '--yscale']:
            ys_ix = argv.index(v)
            YSCALE = argv[ys_ix+1]
        for v in ['-s', '--save']:
            SAVE = True
    print(SAVE)
    main()
